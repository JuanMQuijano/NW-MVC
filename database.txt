CREATE DATABASE NW;

USE NW;

CREATE TABLE USUARIOS(
ID INT NOT NULL AUTO_INCREMENT, 
Nombre VARCHAR(45) NOT NULL,
Apellido VARCHAR(45) NOT NULL,
Correo VARCHAR(100) NOT NULL,
Contrase√±a VARCHAR(100) NOT NULL, 
Genero VARCHAR(45) NOT  NULL, 
FechaN DATE, 
Acuerdos BOOLEAN,
Tipo Varchar(20),
PRIMARY KEY(ID)
);

CREATE TABLE PRENDAS(
	ID INT NOT NULL AUTO_INCREMENT, 
    Nombre VARCHAR(50) NOT NULL, 
    Descripcion VARCHAR(150) NOT NULL, 
    Tipo VARCHAR(30) NOT NULL, 
    Imagen LONGBLOB NOT NULL, 
    Precio DOUBLE,
    S boolean,
    M boolean,
    L boolean,
    XL boolean,
    PRIMARY KEY(ID)
);

CREATE TABLE CODIGOS(
ID INT NOT NULL AUTO_INCREMENT, 
Codigo VARCHAR(10),
Porcentaje VARCHAR(2),
NombreEncargado VARCHAR(50),
PRIMARY KEY(ID));

CREATE TABLE CARRITO(
	IDSESSION VARCHAR(60) NOT NULL,
    IDPRENDA INT NOT NULL, 
    Talla VARCHAR(2), 
    Cantidad INT,
    FOREIGN KEY(IDPRENDA) REFERENCES PRENDAS(ID)
    ON UPDATE CASCADE ON DELETE CASCADE	
);

CREATE TABLE COMPRAS(
ID INT NOT NULL AUTO_INCREMENT,
IDUSUARIO INT,
IDPRENDA INT,
Talla VARCHAR(2),
Cantidad INT,
Codigo VARCHAR(10),
ValorUnitario INT,
ValorFinal INT,
Direccion VARCHAR(50),
Telefono VARCHAR(10),
FechaCompra DATE,
Entregado VARCHAR(10),
PRIMARY KEY(ID),
FOREIGN KEY(IDUSUARIO) REFERENCES USUARIOS(ID),
FOREIGN KEY(IDPRENDA) REFERENCES PRENDAS(ID)
);